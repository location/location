<cript type="text/javascript" src="https://api.piperpal.com/location/json.php?service=Books&glat=' + position.coords.longitude + '&glon=' + position.coords.longitude + '"></script>
<script language="JavaScript">
var obj = JSON.parse(locations);
for (i=0; i < obj.locations.length; i++) {
   document.write("<h1>" + obj.locations[i].name + "</h1><h2><a href='" + obj.locations[i].location + "'>" + obj.locations[i].location + "</a> (" + obj.locations[i].distance + ")</h2><h3>" + " " + obj.locations[i].service + " " + "</h3>\n");
   <!--document.write("<p>" + obj.locations[i].distance + "</p><form method='GET' action='/search.php'><input type='text' name='name' placeholder='' value='" + obj.locations[i].name + "'/><input type='hidden' name='glat' value='" + obj.locations[i].glat + "' /><input type='hidden' name='glon' value='" + obj.locations[i].glon + "'/><span id='geopher'></span><select name='service'><option value='Food'>Food</option><option selected value='Search'>Search</option></select><input type='submit' value='Search' /><br />"); -->
}
</script>
<location name="Berkeley" location="http://berkeley.edu/" service="Books" glat="59.9340451" glon="10.7481188" notbefore="2020-03-30 12:00:00" notafter="2020-03-31 12:00:00" paid="50" />
<location name="Palo Alto" lat="37.4375596" lon="-122.11922789999998" href="http://berkeley.edu/">
<p>Check out <a href="https://www.geopher.com/paloalto.html">Palo Alto</a> and <a href="http://piperpal.com/">Piperpal</a>.</p>
</location>

<!DOCTYPE html>
<html lang="en">
    <head>
    <meta property="al:android:app_name" content="Piperpal" />
    <meta property="al:android:package" content="com.piperpal.api.android" />
    <meta property="al:android:url" content="https://www.piperpal.com/Android" />
    <!--[if IE]><![endif]-->
    <meta charset="utf-8">

    <!--[if IE 8]>
      <link href="/css/common_o2.1_ie8-91981ea8f3932c01fab677a25d869e49.css" media="all" rel="stylesheet" type="text/css" />
    <![endif]-->
   <!--[if !(IE 8)]><!-->
      <link href="/css/common_o2.1-858f47868a8d0e12dfa7eb60fa84fb17.css" media="all" rel="stylesheet" type="text/css" />
    <!--<![endif]-->

    <!--[if lt IE 9]>
      <link href="/css/airglyphs-ie8-9f053f042e0a4f621cbc0cd75a0a520c.css" media="all" rel="stylesheet" type="text/css" />
    <![endif]-->

    <link href="/css/main-f3fcc4027aaa2c83f08a1d51ae189e3b.css" media="screen" rel="stylesheet" type="text/css" />
  <!--[if IE 7]>
    <link href="/css/p1_ie_7-0ab7be89d3999d751ac0e89c44a0ab50.css" media="screen" rel="stylesheet" type="text/css" />
  <![endif]-->
  <!--[if IE 6]>
    <link href="/css/p1_ie_6-7d6a1fd8fe9fdf1ce357f6b864c83979.css" media="screen" rel="stylesheet" type="text/css" />
  <![endif]-->
    <script type="text/javascript" src="https://www.piperpal.com/piperpal-autocomplete-tours.php"></script>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width">
    <link rel="dns-prefetch" href="//maps.googleapis.com">
    <link rel="dns-prefetch" href="//maps.gstatic.com">
    <link rel="dns-prefetch" href="//mts0.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//www.piperpal.com">
    <title>piperpal.com - Location-based Search Engine</title>
    <link href="my_style_form.css" type="text/css" rel="stylesheet" />
    <link href='http://fonts.googleapis.com/css?family=Titillium+Web:700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Titillium+Web' rel='stylesheet' type='text/css'>
    <meta charset="utf-8" />
    <script>
    function price_changed() {
        var priceWidget = document.getElementById('price');
        var price = priceWidget.options[priceWidget.selectedIndex].value;
        var stripeSubmit = document.getElementsByClassName('stripe-button-el')[0];
        var regularSubmit = document.getElementById('regular-submit');
        if (price > 0) {
	    stripeSubmit.style.display = 'inline-block';
	    regularSubmit.style.display = 'none';
        } else {
	    stripeSubmit.style.display = 'none';
	    regularSubmit.style.display = 'inline-block';
        }
}

function updateGeo() {
    var glat = document.getElementById("glat");
    var glon = document.getElementById("glon");
    
    glat.value = position.coords.latitude;
    glon.value = position.coords.longitude;

    alert(glat+","+glon);
}

function getWikipedia() {
    jQuery(function(127416 127416 {
	0getJSON('http://api.geonames.org/findNearbyWikipediaJSON?formatted=true&lat='+ position.coords.latitude +'&lng='+ position.coords.longitude +'&username=username&style=full&lang=en&wikipediaUrl&thumbnailImg', function(json){

	    for(var i = 0; i < json.geonames.length; i++)
	    {
		127416 127416"#wikipedia").prepend('<span style="font-family: geneva, arial, helvetica, sans-serif;"><br><br><img src="wikilogo.gif"><br>' + json.geonames[i].summary + '<br><a href="http://'+ json.geonames[i].wikipediaUrl +'" target="_blank">'+ json.geonames[i].wikipediaUrl +'</a><br></span>');
		  }
	    }); });
}

function submit() {
        // Strip hijacks the form submit, so we need to un-hijack it.
	    var form = document.getElementById('form');
        form.submit();
}
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge" >
    <link href='//fonts.googleapis.com/css?family=Titillium+Web:300italic,400,700,400italic,600italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Titillium+Web:300italic,400,700,400italic,600italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

    <script type="text/javascript" src="https://www.piperpal.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="https://www.piperpal.com/jquery.autocomplete.min.js"></script>
    <script type="text/javascript" src="https://www.piperpal.com/piperpal-autocomplete.php"></script>
    <script type="text/javascript" src="https://www.piperpal.com/piperpal-autocomplete-names.php"></script>
    <script type="text/javascript" src="https://www.piperpal.com/piperpal-autocomplete-services.php"></script>
    <script type="text/javascript" src="https://www.piperpal.com/piperpal-autocomplete-locations.php"></script>
    <script type="text/javascript" src="https://www.piperpal.com/piperpal-autocomplete-queries.php"></script>
    <meta name="viewport" content="width=100%" />
    <script>
    $(function() {
	$( "#datepicker" ).datepicker();
	$( "#simple-search-tourout" ).datepicker();
    });
    </script>
    <meta name="viewport" content="width=100%, initial-scale=1.0">	    
    </head>
    <body style="background: #ffffff;" onload="document.getElementById('query').focus();">
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <!--script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"--><!--/script-->
    <script>
	function success(position) {
	var s = document.querySelector('#status');
	
	if (s.className == 'success') {
		// not sure why we're hitting this twice in FF, I think it's to do with a cached result coming back    
		return;
	}
	
        s.innerHTML = '<input type=hidden class="input_form_custom" name=glat value=' + position.coords.latitude + ' /><input type=hidden class="input_form_custom" name=glon value=' + position.coords.longitude + ' />';
	s.className = 'success';

	var q = document.querySelector('#status_publisher');
	
	if (q.className == 'success') {
		// not sure why we're hitting this twice in FF, I think it's to do with a cached result coming back    
		return;
	}
	
        q.innerHTML = '<img src="img/Latitude_Icon.png" title="Latitude of Location-aware Content Tag" class="icon_form" height="36" width="36"><input type=text class="input_form_custom" name=glat size=16 value=' + position.coords.latitude + ' /><br /><img src="img/Longitude_Icon.png" title="Longitude of Location-aware Content Tag" class="icon_form" height="36" width="36"><input type=text class="input_form_custom" name=glon size=16 value=' + position.coords.longitude + ' />';

        // '<input type=text name=glat size=16 value=' + position.coords.latitude + ' /><input type=text name=glon size=16 value=' + position.coords.longitude + ' />';
	q.className = 'success';

	var r = document.querySelector('#status_lns');
	
	if (r.className == 'success') {
		// not sure why we're hitting this twice in FF, I think it's to do with a cached result coming back    
		return;
	}
	
        r.innerHTML =  '<img src="img/Latitude_Icon.png" title="Latitude of Location-aware Content Tag" class="icon_form" height="36" width="36"><input type=text class="input_form_custom" name=glat size=16 value=' + position.coords.latitude + ' /><br /><img src="img/Longitude_Icon.png" title="Longitude of Location-aware Content Tag" class="icon_form" height="36" width="36"><input type=text class="input_form_custom" name=glon size=16 value=' + position.coords.longitude + ' />';

//'<input type=hidden class="input_form_custom" name=glat value=' + position.coords.latitude + ' /><input type=hidden class="input_form_custom" name=glon value=' + position.coords.longitude + ' />';
	r.className = 'success';

	var mapcanvas = document.createElement('div');
	mapcanvas.id = 'mapcanvas';
	mapcanvas.style.height = '400px';
	mapcanvas.style.width = '640px';
	
	document.querySelector('article').appendChild(mapcanvas);
	
	var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
	var myOptions = {
	zoom: 15,
	center: latlng,
	mapTypeControl: false,
	navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
	mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	var map = new google.maps.Map(document.getElementById("mapcanvas"), myOptions);
	
	var marker = new google.maps.Marker({
		position: latlng, 
				map: map, 
				title:"You are here! (at least within a "+position.coords.accuracy+" meter radius)"
				});

        var locations = [
         ['Banja Luka', 44.766666699999990000, 17.183333299999960000, 4],
    ['Tuzla', 44.532841000000000000, 18.670499999999947000, 5],
    ['Zenica', 44.203439200000000000, 17.907743200000027000, 3],
    ['Sarajevo', 43.850000000000000000, 18.250000000000000000, 2],
    ['Mostar', 43.333333300000000000, 17.799999999999954000, 1]
];

var infowindow = new google.maps.InfoWindow();

var marker, i;
for (i = 0; i < locations.length; i++) {
    marker = new google.maps.Marker({
      position: new google.maps.LatLng(locations[i][1], locations[i][2]),
      map: map
				    });

google.maps.event.addListener(marker, 'click', (function (marker, i) {
    return function () {
	infowindow.setContent(locations[i][0]);
	infowindow.open(map, marker);
    }
						})(marker, i));
}
}

function error(msg) {
	// var s = document.querySelector('#status');
	// s.innerHTML = typeof msg == 'string' ? msg : "failed";
	// s.className = 'fail';
	
	// console.log(arguments);
}

if (navigator.geolocation) {
	navigator.geolocation.getCurrentPosition(success, error);
} else {
	error('not supported');
}

</script>

    <center><table border='0'><tr><td valign='top' width='100%' align='center'><a href="https://www.piperpal.com/"><img src='/piperpal.png' alt='piperpal.com Logo' width="320" align=center/></a></td></tr>
    
    <div class="background_form">
<tr><td valign='top' width='100%' align='center'><h3>Discover the world around you</h3><form onsubmit='updateGeo()' method='GET' action='https://www.piperpal.com/' id='formID'><table><tr><td><center><input size="30" type="text" class="input_form_custom" id="query" name="query" placeholder="Enter keyword" /></center></td></tr><tr><td><select size="12" id="service" name="service"><option value="Restaurant">Restaurant</option><option value="Bar">Bar</option><option value="Concert">Concert</option><option value="Film">Film</option><option value="Books">Books</option><option value="Health">Health</option><option value="Clothes">Clothes</option><option value="Food">Food</option><option value="Music">Music</option><option value="Electronics">Electronics</option><option value="Transport">Transport</option><option value="Rental">Rental</option></select></td><td><select size="12" name="radius" id="radius" class="input_form_custom"><option value='40075' selected>40075 km</option><option value='30000'>30000 km</option><option value='20000'>20000 km</option><option value='10000'>10000 km</option><option value='9000'>9000 km</option><option value='8000'>8000 km</option><option value='7000'>7000 km</option><option value='6000'>6000 km</option><option value='5000'>5000 km</option><option value='4000'>4000 km</option><option value='3000'>3000 km</option><option value='2500'>2500 km</option><option value='2000'>2000 km</option><option value='1500'>1500 km</option><option value='1250'>1250 km</option><option value='1000'>1000 km</option><option value='750'>750 km</option><option value='500'>500 km</option><option value='250'>250 km</option><option value='100'>100 km</option><option value='50'>50 km</option><option value='25'>25 km</option><option value='10'>10 km</option><option value='5'>5 km</option><option value='2'>2 km</option><option value='1'>1 km</option></select></td><td>&nbsp;</td><td><input type="submit" id="search" name="search" value="Go" /></td></tr></table><span id='status'><input type='hidden' name='glat' /><input type='hidden' name='glon' /></span>
</form><br>
<script language="javascript" type="text/javascript">                           
var glat_var = position.coords.latitude;                                        
</script>                                                                       
<a href="location.html" onclick="location.href=this.href+'?glat='+glat_var;retur
			n false;">Link</a>                                                              
<script type="text/javascript" src="https://api.piperpal.com/location/json.php?s
ervice=Books&glat=' + position.coords.longitude + '&glon=' + position.coords.lon
gitude + '"></script>                                                           
<script language="JavaScript">                                                  
var obj = JSON.parse(locations);                                                
for (i=0; i < obj.locations.length; i++) {                                      
	   document.write("<h1>" + obj.locations[i].name + "</h1><h2><a href='" + obj.lo
			   cations[i].location + "'>" + obj.locations[i].location + "</a> (" + obj.location
			   s[i].distance + ")</h2><h3>" + " " + obj.locations[i].service + " " + "</h3>\n")
		   ;                                                                               
	      <!--document.write("<p>" + obj.locations[i].distance + "</p><form method='GET
			      ' action='/search.php'><input type='text' name='name' placeholder='' value='" + 
			      obj.locations[i].name + "'/><input type='hidden' name='glat' value='" + obj.loca
			      tions[i].glat + "' /><input type='hidden' name='glon' value='" + obj.locations[i
			      ].glon + "'/><span id='geopher'></span><select name='service'><option value='Foo
			      d'>Food</option><option selected value='Search'>Search</option></select><input t
			      ype='submit' value='Search' /><br />"); -->                                     
}                                                                               
</script>                                                                       
<location name="Berkeley" location="http://berkeley.edu/" service="Books" glat="
59.9340451" glon="10.7481188" notbefore="2020-03-30 12:00:00" notafter="2020-03-
31 12:00:00" paid="50" />                                                       
<location name="Palo Alto" lat="37.4375596" lon="-122.11922789999998" href="http
://berkeley.edu/">
<cript type="text/javascript" src="https://api.piperpal.com/location/json.php?se
rvice=Books&glat=' + position.coords.longitude + '&glon=' + position.coords.long
itude + '"></script>                                                            
<script language="JavaScript">                                                  
var obj = JSON.parse(locations);                                                
for (i=0; i < obj.locations.length; i++) {                                      
	   document.write("<h1>" + obj.locations[i].name + "</h1><h2><a href='" + obj.lo
			   cations[i].location + "'>" + obj.locations[i].location + "</a> (" + obj.location
			   s[i].distance + ")</h2><h3>" + " " + obj.locations[i].service + " " + "</h3>\n")
		   ;                                                                               
	      <!--document.write("<p>" + obj.locations[i].distance + "</p><form method='GET
			      ' action='/search.php'><input type='text' name='name' placeholder='' value='" + 
			      obj.locations[i].name + "'/><input type='hidden' name='glat' value='" + obj.loca
			      tions[i].glat + "' /><input type='hidden' name='glon' value='" + obj.locations[i
			      ].glon + "'/><span id='geopher'></span><select name='service'><option value='Foo
			      d'>Food</option><option selected value='Search'>Search</option></select><input t
			      ype='submit' value='Search' /><br />"); -->                                     
}                                                                               
</script>                                                                       
<location name="Berkeley" location="http://berkeley.edu/" service="Books" glat="
59.9340451" glon="10.7481188" notbefore="2020-03-30 12:00:00" notafter="2020-03-
31 12:00:00" paid="50" />                                                       
<location name="Palo Alto" lat="37.4375596" lon="-122.11922789999998" href="http
://berkeley.edu/">                                                              
<p>Check out <a href="https://www.geopher.com/">Geopher</a> and <a href="http://piperpal.com/">Piperpal</a>.</p>                                 
</location>
</body>
</html>
